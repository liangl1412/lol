<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Midterm Project</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<body>
<input id="playerName" type="text"></input>
<input type="submit" id="start"/>
<script>
var playerName;
var playerID;
var participantsName = [];

var init = function() {
	playerName = $("#playerName").val().toLowerCase();
	getID(playerName);
}
		
var getID = function(playerName) {
	$.ajax({
        type: "POST",
        url:"test.php",
        dataType:'json', 
			data: {'url': "api/lol/na/v1.4/summoner/by-name/"+playerName+"?"},
        success: function(data){
           playerID = data[playerName].id;
           console.log(playerID);
           getCurrentMatch(playerID);

        }
    });
};

var getCurrentMatch = function(playerID) {
	$.ajax({
        type: "POST",
        url:"test.php",
        dataType:'json', 
			data: {'url': "/observer-mode/rest/consumer/getSpectatorGameInfo/NA1/"+playerID+"?",},
        success: function(data){
           	console.log(data.participants);
        	$.each( data.participants, function( index, player ) {
                
                var html = "<div>" + player.summonerName + "<div>";
                
                $("body").append(html);
                console.log(player.championId);
                getChampionInfo(player.championId);

                
                
			  	
			});
			
        }
    });
};

var getMatches = function(playerID) {
	$.ajax({
        type: "POST",
        url:"test.php",
        dataType:'json', 
			data: {'url': "api/lol/na/v2.2/matchhistory/"+playerID+"?",},
        success: function(data){
           

			
        }
    });
};
var getMatch = function(matchID) {

};
var getItem = function(itemID) {

};
var getRunes = function(playerID) {

};
var getMastery = function(playerID) {

};
var getMasteryImage = function() {

};
var getChampionInfo = function(championID) {
	$.ajax({
        type: "POST",
        url:"test.php",
        dataType:'json', 
			data: {'url': "api/lol/static-data/na/v1.2/champion?dataById=true&champData=image&",},
        success: function(data){
            console.log(data.data[championID]);
        }
    });
};


$("#start").click(function(){
	init();
})

</script>
</body>
</html>